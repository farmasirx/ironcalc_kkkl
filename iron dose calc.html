<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
      :root {
        --primary-color: #C2185B; 
        --primary-light: #F8BBD0; 
        --secondary-color: #FCE4EC; 
        --text-color: #333333;
        --border-color: #bdbdbd;
        --result-bg: #fff0f6;
        --maroon-text: #880e4f; 
        --header-blue: #37474f; 
      }

      body {
        font-family: 'Roboto', sans-serif;
        font-size: 19px; 
        color: var(--text-color);
        background-color: #f5f5f5;
        margin: 0;
        padding: 10px; /* Reduced body padding */
        line-height: 1.4; /* Tightened line height */
      }

      /* Superscript style */
      .formula-box sup {
        font-size: 0.6em; 
        font-weight: 400; 
        vertical-align: super;
      }

      .container {
        position: relative; 
        max-width: 1000px; 
        margin: 0 auto;
        background: white;
        padding: 25px; /* Reduced container padding from 40px to 25px */
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(194, 24, 91, 0.08); 
        border-top: 6px solid var(--primary-color);
      }

      /* --- LOGO CSS --- */
      .top-right-logo-link {
        position: absolute;
        top: 5px;  
        right: 20px; 
        display: block; 
        width: 150px; 
        text-decoration: none;
        transition: opacity 0.2s; 
        z-index: 10; 
      }

      .top-right-logo-link:hover {
        opacity: 0.8; 
        cursor: pointer;
      }

      .top-right-logo-link img {
        width: 100%; 
        height: auto;
        display: block;
      }

      /* Header Section */
      header {
        text-align: center;
        margin-bottom: 20px; /* Drastically reduced from 40px */
        padding-top: 5px; 
      }

      h1 {
        color: var(--primary-color);
        font-size: 38px; 
        font-weight: 900;
        margin: 0 0 5px 0;
        text-transform: uppercase; 
      }

      .subtitle {
        font-size: 16px; 
        color: #888;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        font-weight: 500;
      }

      /* Formula Banner */
      .formula-box {
        background-color: #fff3e0; 
        color: #5d4037; 
        padding: 10px; /* Reduced padding */
        border-radius: 6px;
        font-family: 'Roboto', sans-serif;
        font-size: 20px; 
        font-weight: 500;
        text-align: center;
        margin-top: 15px; /* Reduced margin */
        border: 1px solid #ffe0b2; 
      }

      /* Main Layout */
      .main-content {
        display: flex;
        gap: 30px; 
        align-items: stretch; 
        margin-bottom: 20px; /* Reduced margin */
      }

      .left-col {
        flex: 1;
      }

      .right-col {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      /* Form Styling */
      .form-group {
        margin-bottom: 12px; /* Reduced from 25px to 12px (Compact inputs) */
      }

      .form-group:last-child {
        margin-bottom: 0;
      }

      label {
        display: block;
        font-weight: 700; 
        margin-bottom: 4px;
        color: #333;
        font-size: 19px; 
      }

      .remark {
        font-size: 16px; 
        color: var(--maroon-text);
        margin-top: 2px;
        font-weight: 500;
        font-style: italic; 
      }

      input[type="number"] {
        width: 100%;
        padding: 10px; /* Reduced padding slightly */
        font-size: 21px; 
        border: 1px solid var(--border-color);
        border-radius: 4px;
        box-sizing: border-box;
        transition: all 0.2s;
      }
      
      #weight, #currentHb {
        color: #0d47a1; 
        font-weight: 700; 
      }

      input[type="number"]:focus {
        outline: none;
        border-color: var(--primary-color);
        background-color: var(--secondary-color);
      }

      /* Result Box styling */
      .result-section {
        background-color: var(--result-bg);
        border: 2px solid var(--primary-light);
        padding: 15px; /* Reduced padding */
        border-radius: 8px;
        text-align: center;
        flex-grow: 1; 
        display: flex;
        flex-direction: column;
        justify-content: center; 
      }

      .result-label {
        font-size: 18px; 
        font-weight: bold;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .result-value-small {
        font-size: 36px; 
        font-weight: 700;
        color: var(--maroon-text);
        margin: 5px 0 10px 0; /* Reduced margins */
      }

      .result-value-large {
        font-size: 70px; 
        font-weight: 700;
        color: var(--primary-color);
        margin: 5px 0;
        line-height: 1;
      }

      .divider {
        height: 1px;
        background-color: #f8bbd0;
        margin: 15px 30px; /* Reduced margin */
      }

      /* Protocol Info Section */
      .protocol-section {
        background-color: #fff;
        border: 2px solid var(--primary-light); 
        border-left: 6px solid var(--primary-color); 
        padding: 20px; /* Reduced padding from 35px */
        border-radius: 4px;
        margin-bottom: 20px;
        font-size: 19px; 
      }

      .info-title {
        font-size: 21px; 
        font-weight: 700;
        color: var(--header-blue); 
        margin-bottom: 15px;
        text-transform: uppercase;
        border-bottom: 2px solid #cfd8dc; 
        padding-bottom: 8px;
      }

      .info-row {
        display: flex;
        margin-bottom: 10px; /* Reduced spacing */
        color: #424242;
      }
      
      .info-label {
        font-weight: 700;
        min-width: 250px; 
        color: var(--maroon-text);
      }

      .info-content {
        flex: 1;
      }

      /* Footer Styling */
      .footer {
        margin-top: 20px;
        color: #666;
      }

      .disclaimer-box {
        text-align: center;
        font-style: italic;
        background-color: #fafafa;
        padding: 15px; /* Compact box */
        border-radius: 8px;
        border: 1px solid #eee;
        margin-bottom: 15px;
        font-size: 16px; 
        line-height: 1.4;
      }
      
      .disclaimer-title {
        color: var(--header-blue); 
        font-weight: 700;
        font-size: 17px;
        display: block;
        margin-bottom: 2px;
        font-style: normal;
      }

      .references-box {
        font-size: 15px; 
        border-top: 1px solid #e0e0e0;
        padding-top: 10px;
        color: #757575;
      }

      .ref-title {
        font-weight: 700;
        margin-bottom: 5px;
        text-transform: uppercase;
        font-size: 17px; 
        color: var(--header-blue);
      }

      .ref-list {
        margin: 0;
        padding-left: 20px;
      }
      
      .ref-list li {
        margin-bottom: 2px; 
        line-height: 1.3;
      }

      @media (max-width: 700px) {
        .main-content {
          flex-direction: column;
        }
        /* Add this inside the @media (max-width: 700px) section */
      .formula-box {
        font-size: 15px;      /* Reduces font from 23px to 15px */
        line-height: 1.6;     /* Adds space between the wrapped lines */
        padding: 15px 10px;   /* Adds a bit more vertical breathing room */
        text-align: center;   /* Keeps it centered */
      }

      .formula-box sup {
        font-size: 0.7em;     /* Adjusts the small number '1' size */
      }
        .protocol-section .info-row {
          flex-direction: column;
          margin-bottom: 15px;
        }
        .info-label {
          margin-bottom: 2px;
          min-width: auto;
        }
        .top-right-logo-link {
            width: 100px;
            top: 15px;
            right: 15px;
        }
        header {
            padding-right: 110px; 
            text-align: left;
        }
        h1 {
            font-size: 26px; 
        }
        .container {
            padding: 15px;
        }
      }
.brand-mark {
    font-size: 7px;        /* Matches standard TM size */
    font-weight: 600;       /* Bold enough to be seen at small size */
    color: #4a148c;         /* Professional Dark Purple */
 /* 1. Set the base behavior to superscript */
    vertical-align: super;  
    
    /* 2. Use relative positioning to "nudge" it higher manually */
    position: relative;
    top: -6px;
    letter-spacing: 0.5px;
    font-family: sans-serif; /* Ensures clean letters at small size */
}

    </style>
  </head>
  <body>

    <div class="container">
      
      <a href="https://sites.google.com/moh.gov.my/irx/home" target="_blank" class="top-right-logo-link">
          <img src="logo.png" alt="Organization Logo">
      </a>

      <header>
        <h1>Iron Dose Calculator<span class="brand-mark">WY</span></h1>
        <div class="subtitle">Iron Deficiency Anaemia &bull; Pregnancy</div>
        
        <div class="formula-box">
          Ganzoni's Formula<sup>1</sup>: (Weight &times; (Target Hb - Actual Hb) &times; 2.4) + Iron Stores
        </div>
      </header>

      <div class="main-content">
        
        <div class="left-col">
          <div class="form-group">
            <label for="weight">Body Weight (kg)</label>
            <input type="number" id="weight" placeholder="e.g. 50">
            <div class="remark">Use pre-pregnancy weight for pregnant women²</div>
          </div>

          <div class="form-group">
            <label for="currentHb">Current / Initial Hb (g/dL)</label>
            <input type="number" id="currentHb" placeholder="e.g. 9" step="0.1">
          </div>

          <div class="form-group">
            <label for="targetHb">Target Hb (g/dL)</label>
            <input type="number" id="targetHb" value="12" step="0.1">
            <div class="remark">Standard: 12g/dL for pregnant lady³</div>
          </div>

          <div class="form-group">
            <label for="stores">Iron Stores (mg)</label>
            <input type="number" id="stores" value="500">
            <div class="remark">> 40kg body weight = 500mg³</div>
          </div>
        </div>

        <div class="right-col">
          <div class="result-section">
            
            <div class="result-label">Exact Iron Dose Calculated</div>
            <div class="result-value-small" id="exactDose">0 mg</div>
            
            <div class="divider"></div>

            <div class="result-label" style="color:#C2185B; font-size: 26px; line-height: 1.2;">TOTAL IRON DOSE NEEDED</div>
            <div style="font-size:16px; color:#888; margin-bottom:5px;">(Round up/down to the nearest 100mg)</div>
            <div class="result-value-large" id="roundedDose">0 mg</div>
            <div style="font-size:18px; font-weight:500; color:#555; margin-top:5px;">in divided doses</div>
            
          </div>
        </div>
      </div>

      <div class="protocol-section">
        <div class="info-title">Dosing & Administration Protocols for Iron Sucrose Injection 100mg/5mL</div>
        
        <div class="info-row">
          <div class="info-label">Maximum dose per week³:</div>
          <div class="info-content">
            &lt; 70kg: 7mg/kg/week<br>
            &gt; 70kg: 500mg/week
          </div>
        </div>

        <div class="info-row">
          <div class="info-label">Max single tolerated dose:</div>
          <div class="info-content">
            7mg/kg once a week (max 500mg), must be given over min 3.5 hours⁴.
          </div>
        </div>

        <div class="info-row">
          <div class="info-label">Test dose²:</div>
          <div class="info-content">
            20mg iron sucrose in 20mL NS over 15 mins infusion, then observe for 1 hour (prior first dose only)
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="disclaimer-box">
          <span class="disclaimer-title">DISCLAIMER:</span>
          This guide is intended to support healthcare professionals in calculating iron dose.<br>
          It should be used in conjunction with clinical judgment and interpreted in the context of professional expertise.<br>
          Always refer to the specific product literature for detailed prescribing information and to ensure appropriate and safe administration.
<div class="copyright-text">
            &copy; All Rights Reserved.
          </div>
        </div>
        
        <div class="references-box">
          <div class="ref-title">References</div>
          <ol class="ref-list">
            <li>Ganzoni AM. Intravenous iron-dextran: therapeutic and experimental possibilities. Schweiz Med Wochenschr. 1970; 100(70):301-303.</li>
            <li>Transfusion Practitioner. Protocol for the use of IV iron sucrose (Venofer ®). NHS Hinchingbrooke Health Care; 2008.</li>
            <li>Protocol for Intravenous Venofer (Iron Sucrose) among pregnant women with Iron Deficiency Anaemia in Klinik Kesihatan JKWPKL&P 2022.</li>
            <li>AINIRON Iron Sucrose Injection 20mg/mL [package insert]. Malaysia: AIN MEDICARE SDN BHD; 01 July 2019.</li>
          </ol>
        </div>
      </div>

    </div>

    <script>
      const weightInput = document.getElementById('weight');
      const currentHbInput = document.getElementById('currentHb');
      const targetHbInput = document.getElementById('targetHb');
      const storesInput = document.getElementById('stores');
      
      const exactDoseDisplay = document.getElementById('exactDose');
      const roundedDoseDisplay = document.getElementById('roundedDose');

      const inputs = [weightInput, currentHbInput, targetHbInput, storesInput];
      inputs.forEach(input => {
        input.addEventListener('input', calculate);
      });

      function calculate() {
        const weight = parseFloat(weightInput.value) || 0;
        const currentHb = parseFloat(currentHbInput.value) || 0;
        const targetHb = parseFloat(targetHbInput.value) || 0;
        const stores = parseFloat(storesInput.value) || 0;

        if (weight > 0 && currentHb > 0) {
          const hbDeficit = targetHb - currentHb;
          
          if (hbDeficit < 0) {
              exactDoseDisplay.textContent = "Hb > Target";
              roundedDoseDisplay.textContent = "0 mg";
              return;
          }

          const exactDose = (weight * hbDeficit * 2.4) + stores;
          const roundedDose = Math.round(exactDose / 100) * 100;

          exactDoseDisplay.textContent = exactDose.toFixed(1) + " mg";
          roundedDoseDisplay.textContent = roundedDose + " mg";
        } else {
          exactDoseDisplay.textContent = "0 mg";
          roundedDoseDisplay.textContent = "0 mg";
        }
      }
    </script>
  </body>
</html>